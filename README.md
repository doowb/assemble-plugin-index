# assemble-plugin-index [![NPM version](https://badge.fury.io/js/assemble-plugin-index.svg)](http://badge.fury.io/js/assemble-plugin-index)

> Template indexing plugin for Assemble.io.

## Getting Started
In the command line, run:

```bash
npm install --save-dev assemble-plugin-index
```

Next, in your `assemblefile.js`, insert the following line immediately after you have `require()`d `assemble`:

```js
var index = require('assemble-plugin-index')(assemble);
```

Upon initialization, the module creates a new renderable `index` collection within `assemble`. Before using the plugin, you have to specify a location where `index` collections can be found:

```js
assemble.indices('templates/indices/*.hbs');
```

You can now use the plugin within a task like so:

```js
assemble.task('posts', function() {
  assemble.src('templates/posts/*.hbs')
    .pipe(index('posts', {pattern: 'index:num:', limit: 10}))
    .pipe(assemble.dest('dist/'));
});
```

This will create `dist/index.hbs`, `dist/index1.hbs`, `dist/index2.hbs` and so forth.

You can also specify `index`'s options within `assemble` itself:

```js
assemble.option('index', {limit: 10});
```

Visit the [plugin docs](http://assemble.io/plugins/) for more info or for help getting started.


## Options
## limit
Type: `Number`
Default: `10`

Maximum collection items per index page.

## pattern
Type: `String`
Default: Template name with attached page number

File naming pattern with attached page number and without file extension.
By default, files are named by the index template's name plus an additional page number for successive pages.

The string `:num:` is replaced with the page number or removed for
the first page.

## filter
Type: `String`, `Array`, `Function`
Default: `undefined`

The default filter takes only the `data` object of each template in the pipeline excluding `src` and `dest` properties. If these properties are needed, they need to be explicitly specified.

When a string is given, only one property named by the specified string within the `data` object will be filtered.

When an array is given, all properties specified in the array within the `data` object will be filtered.

When a function is given, the function will be called with a `file` argument representing the currently processing `vinyl` file. The function must immediately return the filtered result as an `Object` containing filtered properties.


## Examples
When used with the configuration shown above, an index template might look as follows:

```html
<h1>Index</h1>
{{#if index.pageIsEmpty}}
  <p>Oops, nothing there yet!</p>
{{else}}
  <ul>
    {{#each items}}
        <li><a href="{{relative ../../page.dest this.dest}}">
          {{ data.title }}
        </a></li>
    {{/each}}
  </ul>
  <ul>
    {{#if index.pageIsFirst}}
      <li><a href="#">Prev</a></li>
    {{else}}
      <li><a href="{{relative ../page.dest index.pagePrev.page.dest}}">Prev</a></li>
    {{/if}}
    {{#each index.pages}}
      <li><a href="{{relative ../page.dest this.page.dest}}">{{indexPage}}</a></li>
    {{/each}}
    {{#if index.pageIsLast}}
      <li><a href="#">Next</a></li>
    {{else}}
      <li><a href="{{relative ../page.dest index.pageNext.page.dest}}">Next</a></li>
    {{/if}}
  </ul>
{{/if}}
```


## Context
The templating context contains the following variables which can be used for the generation of the index page.

## items
Type: `Array`

An array containing all items available for this particular index page. Each `item` contains the following properties:

* the relative `url` to the template
* properties generated by the used `filter`

## pagination
Type: `Object`

An object describing the state of the index pagination as the following code listing shows:

```js
{
  first: 'index.html',
  prev: 'index2.html',
  current: 'index3.html',
  next: undefined,
  last: 'index3.html',
  pages: ['index.html', 'index1.html', 'index2.html', 'index3.html'],
  isFirst: false,
  isLast: true
}
```

### first
Type: `String`

Relative path of the first index page in a collection of index pages.

### prev
Type: `String`

Relative path of the previous index page in a collection of index pages.

### next
Type: `String`

Relative path of the next index page in a collection of index pages.

### last
Type: `String`

Relative path of the last index page in a collection of index pages.

### pages
Type: `Array`

An array of strings of relative paths of all index pages.

### isFirst
Type: `Boolean`

Whether the current index page is the first index page of a collection of index pages.

### isLast
Type: `Boolean`

Whether the current index page is the last index page of a collection of index pages.


## Authors
* Vincent Wochnik ([GitHub](https://github.com/vwochnik))


## License
Copyright (c) 2015 Vincent Wochnik  
Released under the MIT license

***

_This file was generated by [verb-cli](https://github.com/assemble/verb-cli) on April 02, 2015._
